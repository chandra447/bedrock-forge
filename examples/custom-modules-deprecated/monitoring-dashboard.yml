# Example: Custom module for CloudWatch monitoring dashboard
kind: CustomModule
metadata:
  name: bedrock-monitoring
  description: CloudWatch dashboard for monitoring Bedrock agent performance
spec:
  # Local module with relative path
  source: "../shared-modules/cloudwatch-dashboard"
  
  # Depends on agent and related resources being created
  dependsOn:
    - "customer-support-agent"
    - "order-lookup-lambda"
  
  variables:
    dashboard_name: "BedrockAgentMonitoring-${var.environment}"
    
    # Metrics to monitor
    agent_names:
      - "customer-support-agent"
      - "product-recommendation-agent"
    
    lambda_function_names:
      - "order-lookup-lambda"
      - "product-search-lambda"
    
    # Alert thresholds
    error_rate_threshold: 5.0  # 5% error rate
    latency_threshold: 10000   # 10 seconds
    
    # SNS topic for alerts
    alert_topic_arn: "arn:aws:sns:us-east-1:123456789012:bedrock-alerts"
    
    tags:
      Environment: "${var.environment}"
      Purpose: "BedrockMonitoring"
      ManagedBy: "bedrock-forge"
  
  description: "CloudWatch dashboard and alarms for Bedrock agent monitoring"